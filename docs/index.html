<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>three-tile</title><meta name="description" content="Documentation for three-tile"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">three-tile</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>three-tile</h2></div><div class="tsd-panel tsd-typography"><a id="md:three-tile-v063" class="tsd-anchor"></a><h1><a href="#md:three-tile-v063"><strong>three-tile V0.6.3</strong></a></h1><p align='right'>hz_gjf@163.com</p>

<a id="md:1-简介" class="tsd-anchor"></a><h2><a href="#md:1-简介">1 简介</a></h2><p>three-tile 是一个使用 <a href="https://threejs.org/">threejs</a>开发的轻量级三维瓦片地图库，具有使用简单、资源占用少等优点，它提供了一个使用瓦片地图服务的轻量级三维地形模型，适用于给基于 threejs 开发应用增加三维地图。</p>
<p>详细介绍：<a href="https://blog.csdn.net/HZGJF/article/details/140280844">https://blog.csdn.net/HZGJF/article/details/140280844</a></p>
<p>注意：这不是 Cesium，也不是 Mapbox-gl，跟这些三维 GIS 框架没有关系。</p>
<p>Source: <a href="https://github.com/sxguojf/three-tile">https://github.com/sxguojf/three-tile</a></p>
<p>demo: <a href="https://sxguojf.github.io/mydemo/three-tile/index.html">three-tile demo (sxguojf.github.io</a></p>
<p>提供一些开发示例：</p>
<p>Examples: <a href="https://sxguojf.github.io/three-tile-example">https://sxguojf.github.io/three-tile-example</a></p>
<p>Examples Source： <a href="https://github.com/sxguojf/three-tile-example">https://github.com/sxguojf/three-tile-example</a></p>
<table>
<thead>
<tr>
<th><img src="images/image-3.png" alt="alt text"></th>
<th><img src="images/image-4.png" alt="alt text"></th>
</tr>
</thead>
<tbody><tr>
<td><img src="images/image-2.png" alt="alt text"></td>
<td><img src="images/image-20240715090719129.png" alt="image-20240715090719129"></td>
</tr>
<tr>
<td><img src="images/image-20240715090911564.png" alt="image-20240715090911564"></td>
<td><img src="images/image-1.png" alt="alt text"></td>
</tr>
</tbody></table>
<p>免责声明：</p>
<ul>
<li>本框架不含任何地图数据，Example 中使用的地图均为直接调用第三方数据，使用中请遵循法律法规要求。</li>
</ul>
<a id="md:11-特点" class="tsd-anchor"></a><h3><a href="#md:11-特点">1.1 特点</a></h3><ul>
<li>轻量级：地图以一个三维模型方式提供，不会对已有程序架构产生任何影响。</li>
<li>依赖少：整个框架仅有 threejs（R165）一个依赖。</li>
<li>速度快：对资源占用做极致优化，核显也能轻松跑到 60FPS。</li>
<li>使用简单：熟悉 threejs 基本上没有学习成本。</li>
<li>扩展性强：数据、模型、纹理、材质、渲染过程均能根据自己需要扩展和替换。</li>
</ul>
<a id="md:12-开发环境" class="tsd-anchor"></a><h3><a href="#md:12-开发环境">1.2 开发环境</a></h3><ul>
<li>语言：TypeScript 100%</li>
<li>IDE： VSCode</li>
<li>打包：Vite 4.0</li>
<li>依赖：three 0.165</li>
</ul>
<hr>
<a id="md:2-安装" class="tsd-anchor"></a><h2><a href="#md:2-安装">2 安装</a></h2><a id="md:21-直接引用" class="tsd-anchor"></a><h3><a href="#md:21-直接引用">2.1 直接引用</a></h3><pre><code><span class="hl-0">&lt;</span><span class="hl-1">script</span><span class="hl-0"> </span><span class="hl-1">src</span><span class="hl-0">=</span><span class="hl-2">&quot;./three.js&quot;</span><span class="hl-0">&gt;&lt;/</span><span class="hl-3">script</span><span class="hl-0">&gt;</span><br/><span class="hl-0">&lt;</span><span class="hl-1">script</span><span class="hl-0"> </span><span class="hl-1">src</span><span class="hl-0">=</span><span class="hl-2">&quot;./three-tile.umd.js&quot;</span><span class="hl-0">&gt;&lt;/</span><span class="hl-3">script</span><span class="hl-0">&gt;</span>
</code><button>Copy</button></pre>
<a id="md:22-npm" class="tsd-anchor"></a><h3><a href="#md:22-npm">2.2 npm</a></h3><pre><code class="language-sh"><span class="hl-4">npm</span><span class="hl-0"> </span><span class="hl-2">i</span><span class="hl-0"> </span><span class="hl-2">three-tile</span><span class="hl-0"> </span><span class="hl-5">-S</span>
</code><button>Copy</button></pre>
<pre><code class="language-sh"><span class="hl-4">yarn</span><span class="hl-0"> </span><span class="hl-2">add</span><span class="hl-0"> </span><span class="hl-2">three-tile</span><span class="hl-0"> </span><span class="hl-5">-S</span>
</code><button>Copy</button></pre>
<hr>
<a id="md:3-使用" class="tsd-anchor"></a><h2><a href="#md:3-使用">3 使用</a></h2><p>和一般 threejs 应用一样，初始化 threejs 三维场景后，将地图模型加入场景即可完成地图的显示。</p>
<p>使用按以下步骤：</p>
<ol>
<li>定义地图数据源</li>
<li>创建地图模型</li>
<li>初始化三维场景</li>
<li>地图模型加入三维场景</li>
</ol>
<a id="md:31-定义地图数据源" class="tsd-anchor"></a><h3><a href="#md:31-定义地图数据源">3.1 定义地图数据源</a></h3><p>three-tile 内置了 Mapbox、ArcGis、Bing、天地图、高德、腾讯等多个厂商的瓦片地图源，可直接调用，也可根据根据需要自行扩展。地图切片默认使用 Google 方案，地形瓦片支持 MapBox 的 terrain-rgb 和 ArcGis 的 LERC 格式。如 MapBox 数据源创建如下：</p>
<pre><code class="language-typescript"><span class="hl-6">import</span><span class="hl-0"> </span><span class="hl-5">*</span><span class="hl-0"> </span><span class="hl-6">as</span><span class="hl-0"> </span><span class="hl-1">tt</span><span class="hl-0"> </span><span class="hl-6">from</span><span class="hl-0"> </span><span class="hl-2">&quot;three-tile&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">// MapBoxToken 请更换为你自己申请的key</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">MAPBOXKEY</span><span class="hl-0"> = </span><span class="hl-2">&quot;xxxxxxxxxx&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">// mapbox 影像数据源</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">mapBoxImgSource</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-1">tt</span><span class="hl-0">.</span><span class="hl-1">plugin</span><span class="hl-0">.</span><span class="hl-4">MapBoxSource</span><span class="hl-0">({</span><br/><span class="hl-0">    </span><span class="hl-1">token:</span><span class="hl-0"> </span><span class="hl-8">MAPBOXKEY</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">dataType:</span><span class="hl-0"> </span><span class="hl-2">&quot;image&quot;</span><span class="hl-0">, </span><span class="hl-7">//影像格式数据标志</span><br/><span class="hl-0">    </span><span class="hl-1">style:</span><span class="hl-0"> </span><span class="hl-2">&quot;mapbox.satellite&quot;</span><span class="hl-0">, </span><span class="hl-7">//mapbox卫星影像数据url参数</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-7">// mapbox 地形数据源</span><br/><span class="hl-6">export</span><span class="hl-0"> </span><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">mapBoxDemSource</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-1">tt</span><span class="hl-0">.</span><span class="hl-1">plugin</span><span class="hl-0">.</span><span class="hl-4">MapBoxSource</span><span class="hl-0">({</span><br/><span class="hl-0">    </span><span class="hl-1">token:</span><span class="hl-0"> </span><span class="hl-8">MAPBOXKEY</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-1">dataType:</span><span class="hl-0"> </span><span class="hl-2">&quot;terrain-rgb&quot;</span><span class="hl-0">, </span><span class="hl-7">//terrain-rgb格式地形数据标志</span><br/><span class="hl-0">    </span><span class="hl-1">style:</span><span class="hl-0"> </span><span class="hl-2">&quot;mapbox.terrain-rgb&quot;</span><span class="hl-0">, </span><span class="hl-7">//mapbox地形数据url参数</span><br/><span class="hl-0">    </span><span class="hl-1">maxLevel:</span><span class="hl-0"> </span><span class="hl-9">15</span><span class="hl-0">,</span><br/><span class="hl-0">});</span>
</code><button>Copy</button></pre>
<p><strong>注意：</strong></p>
<ol>
<li>多数数据源需要申请 token 才能使用，请不要用我示例中的。</li>
<li>部分国外的地图无法访问，或是速度很慢，这个需要自己想办法，你们懂的。</li>
<li>国内地图使用“火星坐标系”，影像图与地形有可能无法套准。</li>
<li>地图数据使用，请遵循法律法规要求。</li>
</ol>
<a id="md:32-地图创建" class="tsd-anchor"></a><h3><a href="#md:32-地图创建">3.2 地图创建</a></h3><p>使用 TileMap 类的工厂方法 create() 创建地图，加入场景。</p>
<pre><code class="language-typescript"><span class="hl-6">import</span><span class="hl-0"> </span><span class="hl-5">*</span><span class="hl-0"> </span><span class="hl-6">as</span><span class="hl-0"> </span><span class="hl-1">tt</span><span class="hl-0"> </span><span class="hl-6">from</span><span class="hl-0"> </span><span class="hl-2">&quot;three-tile&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">// 创建地图对象</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">map</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-1">tt</span><span class="hl-0">.</span><span class="hl-4">TileMap</span><span class="hl-0">({</span><br/><span class="hl-0">    </span><span class="hl-7">// 影像数据源</span><br/><span class="hl-0">    </span><span class="hl-1">imgSource:</span><span class="hl-0"> </span><span class="hl-1">imgSource</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-7">// 高程数据源</span><br/><span class="hl-0">    </span><span class="hl-1">demSource:</span><span class="hl-0"> </span><span class="hl-1">demSource</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-7">// 地图投影中央经线经度</span><br/><span class="hl-0">    </span><span class="hl-1">lon0:</span><span class="hl-0"> </span><span class="hl-9">90</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-7">// 最小缩放级别</span><br/><span class="hl-0">    </span><span class="hl-1">minLevel:</span><span class="hl-0"> </span><span class="hl-9">2</span><span class="hl-0">,</span><br/><span class="hl-0">    </span><span class="hl-7">// 最大缩放级别</span><br/><span class="hl-0">    </span><span class="hl-1">maxLevel:</span><span class="hl-0"> </span><span class="hl-9">20</span><span class="hl-0">,</span><br/><span class="hl-0">});</span><br/><br/><span class="hl-7">// 地图旋转到xz平面</span><br/><span class="hl-1">map</span><span class="hl-0">.</span><span class="hl-4">rotateX</span><span class="hl-0">(-</span><span class="hl-1">Math</span><span class="hl-0">.</span><span class="hl-8">PI</span><span class="hl-0"> / </span><span class="hl-9">2</span><span class="hl-0">);</span><br/><br/><span class="hl-7">// 将地图加入三维场景</span><br/><span class="hl-1">viewer</span><span class="hl-0">.</span><span class="hl-1">scene</span><span class="hl-0">.</span><span class="hl-4">add</span><span class="hl-0">(</span><span class="hl-1">map</span><span class="hl-0">);</span>
</code><button>Copy</button></pre>
<a id="md:33-初始化三维场景" class="tsd-anchor"></a><h3><a href="#md:33-初始化三维场景">3.3 初始化三维场景</a></h3><p>three-tile 的三维场景初始化和 threejs 相同，按 threejs 的套路初始化场景、摄像机、控制器、灯光等即可。为了便于使用，three-tile 还提供一个 GLViewer 类，它封装了场景初始化过程，可直接使用它进行初始化。</p>
<pre><code class="language-typescript"><span class="hl-6">import</span><span class="hl-0"> </span><span class="hl-5">*</span><span class="hl-0"> </span><span class="hl-6">as</span><span class="hl-0"> </span><span class="hl-1">tt</span><span class="hl-0"> </span><span class="hl-6">from</span><span class="hl-0"> </span><span class="hl-2">&quot;three-tile&quot;</span><span class="hl-0">;</span><br/><br/><span class="hl-7">// 初始化三维场景(调用three-tile内置的初始化类)</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">viewer</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-1">tt</span><span class="hl-0">.</span><span class="hl-1">plugin</span><span class="hl-0">.</span><span class="hl-4">GLViewer</span><span class="hl-0">(</span><span class="hl-2">&quot;#map&quot;</span><span class="hl-0">);</span>
</code><button>Copy</button></pre>
<p>与二维 webgis 不同，三维场景中平移、缩放、旋转地图模型并不是修改模型的位置，而是修改摄像机（观察者）位置来实现的。包括摄像机坐标和其方向矢量（heading 、pitch 、roll ），即观察者在哪个坐标及朝哪个方向看。但这个这个描述有些抽象，three-tile 中用摄像机坐标和地图中心坐标替代，通过将摄像机经度纬度高度和目标点经度纬度高度转换为世界坐标，传入 GLViewer 构造函数参数来定位。</p>
<pre><code class="language-typescript"><span class="hl-7">// 地图中心坐标(经度，纬度，高度)</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">centerGeo</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-4">Vector3</span><span class="hl-0">(</span><span class="hl-9">110</span><span class="hl-0">, </span><span class="hl-9">30</span><span class="hl-0">, </span><span class="hl-9">0</span><span class="hl-0">);</span><br/><span class="hl-7">// 摄像坐标(经度，纬度，高度)</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">camersGeo</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-4">Vector3</span><span class="hl-0">(</span><span class="hl-9">110</span><span class="hl-0">, </span><span class="hl-9">0</span><span class="hl-0">, </span><span class="hl-9">10000</span><span class="hl-0">);</span><br/><span class="hl-7">// 地图中心转为世界坐标</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">centerPostion</span><span class="hl-0"> = </span><span class="hl-1">map</span><span class="hl-0">.</span><span class="hl-4">localToWorld</span><span class="hl-0">(</span><span class="hl-1">map</span><span class="hl-0">.</span><span class="hl-4">geo2pos</span><span class="hl-0">(</span><span class="hl-1">centerGeo</span><span class="hl-0">));</span><br/><span class="hl-7">// 摄像机转为世界坐标</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">cameraPosition</span><span class="hl-0"> = </span><span class="hl-1">map</span><span class="hl-0">.</span><span class="hl-4">localToWorld</span><span class="hl-0">(</span><span class="hl-1">map</span><span class="hl-0">.</span><span class="hl-4">geo2pos</span><span class="hl-0">(</span><span class="hl-1">camersGeo</span><span class="hl-0">));</span><br/><span class="hl-7">// 初始化场景</span><br/><span class="hl-5">const</span><span class="hl-0"> </span><span class="hl-8">viewer</span><span class="hl-0"> = </span><span class="hl-5">new</span><span class="hl-0"> </span><span class="hl-1">tt</span><span class="hl-0">.</span><span class="hl-1">plugin</span><span class="hl-0">.</span><span class="hl-4">GLViewer</span><span class="hl-0">(</span><span class="hl-2">&quot;#map&quot;</span><span class="hl-0">, { </span><span class="hl-1">centerPostion</span><span class="hl-0">, </span><span class="hl-1">cameraPosition</span><span class="hl-0"> });</span>
</code><button>Copy</button></pre>
<p>如果你熟悉 threejs，场景初始化最好自己写，跟普通 threejs 程序并无太大差异。以下部分需要注意：</p>
<ul>
<li>为了使地图坐标系与一般人类理解一致，three-tile 地图坐标方向采用东(x)北(y)上(z)方向，即地面在 x-y 平面上，海拔高度在 z 轴。而 threejs 一般平面在 xz 平面上，高度为 y 轴，所以初始化时需要使场景默认 up 指向 z 轴，可添加：Object3D.DEFAULT_UP.set(0, 0, 1) 即可。如果你的应用不能调整 up 值，可以将地图旋转-π/2 完成。</li>
<li>因大部分 three 开发人员不太关注 Object3D.up 值，包括 threejs 官方示例，以至于一些 three 代码需要做修改才能添加运行，从 V0.6.1 开始，GLViewer 类中不再设置 Object3D.DEFAULT_UP.set(0, 0, 1) ，开发者需在创建地图后自行将地图沿 x 轴旋转-π/2° ：map.rotateX(-Math.PI / 2);</li>
<li>地图添加光照才能显示。一般至少要有一个环境光，另外最好加一个直射光以通过地形法向量增强凹凸感。</li>
<li>场景控制器一般应用可使用 threejs 内置的 MapControls，其它控制器如 OrbitControls、FlyControls、PointerLockControls、TransformControls、FirstPersonControls 都能完美支持。</li>
</ul>
<a id="md:4-主要类说明" class="tsd-anchor"></a><h2><a href="#md:4-主要类说明">4. 主要类说明</a></h2><p>一般使用，仅需 TileMap 类即可完成绝大部分操作，TileMap 继承于 threejs 的 Mesh 类，你可以把它当做一个普通的三维模型，加入 scene 即可使用。</p>
<a id="md:41-tilemap-构造函数" class="tsd-anchor"></a><h3><a href="#md:41-tilemap-构造函数">4.1 TileMap 构造函数</a></h3><p>constructor(params: MapParams) ，MapParams：地图构造函数参数：</p>
<pre><code class="language-typescript"><span class="hl-5">type</span><span class="hl-0"> </span><span class="hl-3">MapParams</span><span class="hl-0"> = {</span><br/><span class="hl-0">    </span><span class="hl-1">imgSource</span><span class="hl-0">: </span><span class="hl-3">ISource</span><span class="hl-0">[] | </span><span class="hl-3">ISource</span><span class="hl-0">; </span><span class="hl-7">//影像数据源</span><br/><span class="hl-0">    </span><span class="hl-1">demSource</span><span class="hl-0">?: </span><span class="hl-3">ISource</span><span class="hl-0">; </span><span class="hl-7">//高程数据源</span><br/><span class="hl-0">    </span><span class="hl-1">minLevel</span><span class="hl-0">?: </span><span class="hl-3">number</span><span class="hl-0">; </span><span class="hl-7">//最小缩放级别</span><br/><span class="hl-0">    </span><span class="hl-1">maxLevel</span><span class="hl-0">?: </span><span class="hl-3">number</span><span class="hl-0">; </span><span class="hl-7">//最大缩放级别</span><br/><span class="hl-0">    </span><span class="hl-1">lon0</span><span class="hl-0">?: </span><span class="hl-3">ProjectCenterLongitude</span><span class="hl-0">; </span><span class="hl-7">//地图投影中央经线经度</span><br/><span class="hl-0">    </span><span class="hl-1">loader</span><span class="hl-0">?: </span><span class="hl-3">ITileLoader</span><span class="hl-0">; </span><span class="hl-7">//地图加载器</span><br/><span class="hl-0">    </span><span class="hl-1">rootTile</span><span class="hl-0">?: </span><span class="hl-3">RootTile</span><span class="hl-0">; </span><span class="hl-7">//根瓦片</span><br/><span class="hl-0">};</span>
</code><button>Copy</button></pre>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>imgSource</td>
<td>ISource[] | ISource</td>
<td>必选参数，默认为[]，用来指定地图瓦片的影像数据源，如果有多层影像数据可传入影像源数组，多层影像将以叠加混合方式显示。数据源的类型为 ISource，three-tile 已内置主流瓦片数据源，可直接创建使用。</td>
</tr>
<tr>
<td>demSource</td>
<td>ISource</td>
<td>可选参数，默认为 undefined，用来指定地图瓦片地形数据源，如果为空，地图将不显示地形，与影像数据源一样，可使用内置的地形数据源。</td>
</tr>
<tr>
<td>minLevel</td>
<td>number</td>
<td>可选参数，地图瓦片的最小缩放级别，默认为 0，当瓦片缩放级别小于它时地图瓦片将不在合并，注意它并不是用来限制地图大小的。</td>
</tr>
<tr>
<td>maxLevel</td>
<td>number</td>
<td>可选参数，地图瓦片的最最大放级别，默认为 19，当瓦片缩放级别小于它时地图瓦片将不在细分，注意它并不是用来限制地图大小的。</td>
</tr>
<tr>
<td>lon0</td>
<td>ProjectCenterLongitude</td>
<td>可选参数，地图投影中央经线经度，默认为 0，它用来指定投影的中央经线的经度，注意它并不是用来指定地图中心位置的。</td>
</tr>
<tr>
<td>loader</td>
<td>ITileLoader</td>
<td>可选参数，地图数据加载器，默认为内置的 TileLoader 类实例，用来指定用哪个加载器加载数据生成瓦片模型和材质，高级开发者可通过自定义 loader 实现自定义数据加载、瓦片模型创建过程。</td>
</tr>
<tr>
<td>rootTile</td>
<td>RootTile</td>
<td>可选参数，地图根瓦片，默认为 0 级瓦片，用来指定从哪个开始创建瓦片树，绝大数情况不需要手工传入。</td>
</tr>
</tbody></table>
<p>构造函数参数，均作为 TileMap 的同名属性进行封装，运行时可通过修改这些属性改变地图状态。</p>
<a id="md:42-tilemap-主要属性" class="tsd-anchor"></a><h3><a href="#md:42-tilemap-主要属性">4.2 TileMap 主要属性</a></h3><table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>autoUpdate</td>
<td>boolean</td>
<td>默认为 true，指定是否在每帧渲染中更新地图模型和数据。禁止更新主要有两种使用场景，一是在某些特效需要改变摄像机位置取得该摄像机位置下的离线渲染缓冲，如水面、反光等特效，由于 autoUpdate 为 true 时，地图瓦片会根据摄像机位置做增删，无法取得正确的缓冲图像，所以可在加载特效前禁止自动更新，完成后恢复自动更新；二是用于瓦片树和数据加载调试，运行时禁止自动更新可查看瓦片树是否正确得被细化、合并、剔除</td>
</tr>
<tr>
<td>autoLoad</td>
<td>boolean</td>
<td>默认为 true，指定是否在每帧渲染中加载地图模型和数据，与 autoUpdate 类似，但它仅控制数据是否加载，主要用于调试</td>
</tr>
<tr>
<td>autoPosition</td>
<td>boolean</td>
<td>默认为 false，指定是否在每帧渲染中根据视野内瓦片的平均海拔高度，调整地图模型的位置（高度）。地图默认位置在海拔 0 米，但在高海拔地区，地面在视野里显得很高，自动调整会将模型位置调整为地面平均海拔高度而不是 0 米。自动调整在快速旋转或移动地图时，视野内瓦片平均海拔变化很大，地图有些漂移感觉，故一般在 2000 米海拔下设置为 false，如果你不明白它是啥意思，保持默认值</td>
</tr>
<tr>
<td>maxZInView</td>
<td>number</td>
<td>取得视野内地形的最高高度</td>
</tr>
<tr>
<td>minZInView</td>
<td>number</td>
<td>取得视野内地形的最低高度</td>
</tr>
<tr>
<td>avgZInView</td>
<td>number</td>
<td>取得视野内地形的平均高度</td>
</tr>
<tr>
<td>loadCacheSize</td>
<td>number</td>
<td>默认为 500，设置或取得瓦片数据的缓存大小，单位为块。较大的缓存能提高运行速度，但会耗费较多内存</td>
</tr>
<tr>
<td>viewerBufferSize</td>
<td>number</td>
<td>默认为 1.2，设置或取得瓦片渲染缓冲区大小系数，取值在 1-2 之间。为了减少资源占用，three-tile 仅加载视野体内瓦片，在瓦片离开视野立即释放，进入视野在重新加载，这就造成刚进入视野的瓦片出现短暂空白，通过调整 viewerBufferSize，可控制瓦片离开视野多远会才被释放。用瓦片大小的倍数表示，增大它瓦片将离开视野较远时才释放，能够提高渲染速度，但会占用大量 gpu 资源。如果你的 cpu 够强悍可以设置大些</td>
</tr>
<tr>
<td>LODThreshold</td>
<td>number</td>
<td>默认为 1，设置瓦片 LOD 阈值系数。TileMap 本质上是一个动态 LOD 模型，它根据瓦片离摄像机的距离对模型进行细化或合并，该值越大瓦片细化越快，越小瓦片合并越快快</td>
</tr>
<tr>
<td>attributions</td>
<td>string[]</td>
<td>取得瓦片数据归属者信息，如版权等，来自瓦片数据源定义中的 attributions 属性源</td>
</tr>
<tr>
<td>tileCount</td>
<td>Object</td>
<td>取得瓦片统计信息，如瓦片总数、叶子瓦片数、可视瓦片数等，主要用来进行调试</td>
</tr>
</tbody></table>
<a id="md:43-tilemap-主要方法" class="tsd-anchor"></a><h3><a href="#md:43-tilemap-主要方法">4.3 TileMap 主要方法</a></h3><table>
<thead>
<tr>
<th>名称</th>
<th>参数</th>
<th>返回</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>geo2pos(geo: Vector3)</td>
<td>geo: 地理坐标（经纬度）</td>
<td>Vector3：地图模型局地坐标</td>
<td>地理坐标转地图模型坐标</td>
</tr>
<tr>
<td>pos2geo(pos: Vector3)</td>
<td>pos: 地图模型坐标</td>
<td>Vector3：地理坐标（经度、纬度、高度）</td>
<td>地图模型坐标转地理坐标</td>
</tr>
<tr>
<td>getLocalInfoFromGeo(geo: Vector3)</td>
<td>geo: 地理坐标（经纬度）</td>
<td>LocationInfo：它继承于 THREE.Intersection，除了交点信息，增加了 location 属性，包含地理坐标（经度、纬度、高度）</td>
<td>通过射线法获取指定地理坐标的地面信息（法向量、高度等）</td>
</tr>
<tr>
<td>getLocalInfoFromWorld(pos: Vector3)</td>
<td>pos: 世界坐标</td>
<td>LocationInfo：它继承于 THREE.Intersection，除了交点信息，增加了 location 属性，包含地理坐标（经度、纬度、高度）</td>
<td>通过射线法获取指定世界坐标的地面信息（法向量、高度等）</td>
</tr>
<tr>
<td>getLocalInfoFromScreen(camera: Camera, pointer: Vector2)</td>
<td>camera: 摄像机 ,pointer:屏幕坐标</td>
<td>LocationInfo：它继承于 THREE.Intersection，除了交点信息，增加了 location 属性，包含地理坐标（经度、纬度、高度）</td>
<td>通过射线法获取指定屏幕坐标的地面信息（法向量、高度等）</td>
</tr>
<tr>
<td>reload()</td>
<td>void</td>
<td>void</td>
<td>重新加载地图，在改变地图数据源后调用它才能生效</td>
</tr>
<tr>
<td>static create(params: MapParams)</td>
<td>params:地图构建参数</td>
<td>TileMap：瓦片地图对象</td>
<td>静态工厂函数，与构造函数功能参数相同</td>
</tr>
</tbody></table>
<a id="md:44-tilemap-事件" class="tsd-anchor"></a><h3><a href="#md:44-tilemap-事件">4.4 TileMap 事件</a></h3><table>
<thead>
<tr>
<th>事件名称</th>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>update</td>
<td>delta: 时间戳</td>
<td>在地图每帧更新时发生，与 threejs 的渲染回调函数基本一致</td>
</tr>
<tr>
<td>tile-created</td>
<td>tile: 瓦片</td>
<td>在每块瓦片创建完成后发生，可在此事件中修改瓦片默认属性</td>
</tr>
<tr>
<td>tile-loaded</td>
<td>tile: 瓦片</td>
<td>在每块瓦片数据加载完成时发生，可在此事件中修改瓦片数据</td>
</tr>
<tr>
<td>source-changed</td>
<td>source: 地图数据源</td>
<td>在数据源对象发生变化时发生</td>
</tr>
<tr>
<td>projection-changed</td>
<td>projection: 投影对象</td>
<td>在地图投影发生变化时发生</td>
</tr>
<tr>
<td>loading-start</td>
<td>itemsLoaded: 加载完成数量<br />itemsTotal: 加载完成合计</td>
<td>在地图数据开始加载时发生</td>
</tr>
<tr>
<td>loading-error</td>
<td>url: 瓦片 url</td>
<td>在地图数据加载错误时发生</td>
</tr>
<tr>
<td>loading-complete</td>
<td></td>
<td>在地图数据加载完成时发生</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<a id="md:5-约定和限制" class="tsd-anchor"></a><h2><a href="#md:5-约定和限制">5. 约定和限制</a></h2><ul>
<li>坐标系：地图模型局地坐标系为东北上坐标系，即 X 轴指向东，Y 轴指向北，Z 轴指向上。与 threejs 默认坐标不同需要注意。</li>
<li>坐标单位：角度单位为弧度，经纬度为度，3857 投影（默认）坐标单位为公里，4326 投影单位为 0.01 度，高度单位均为公里。</li>
<li>瓦片数据：内建的地图影像和地形数据均使用图片格式（jpg、png、webp 等），支持 3854 和 4326 投影，暂不支持矢量瓦片。</li>
<li>瓦片属性：默认情况瓦片模型纹理透明属性开启，请注意渲染顺序。</li>
<li>地图清晰度：清晰度与本框架无关，取决数据源精度。</li>
<li>地图标注源：大部分国内厂商地图数据的地名、边界、道路有一定偏移，与地形无法完全匹配。</li>
<li>地图 token：大部分厂商的地图数据需要申请开发 key 才能使用，three-tile 示例包含一些厂商的 token，访问的人多了厂商会封掉它们，使用者一定要自己申请（又不要钱）避免直接使用。</li>
</ul>
<a id="md:6-运行调试程序" class="tsd-anchor"></a><h2><a href="#md:6-运行调试程序">6. 运行调试程序</a></h2><ul>
<li>npm run dev</li>
</ul>
<a id="md:7-示例" class="tsd-anchor"></a><h2><a href="#md:7-示例">7. 示例</a></h2><p>提供一个最小化示例：</p>
<pre><code class="language-html"><span class="hl-10">&lt;!</span><span class="hl-11">DOCTYPE</span><span class="hl-0"> </span><span class="hl-12">html</span><span class="hl-10">&gt;</span><br/><span class="hl-10">&lt;</span><span class="hl-11">html</span><span class="hl-0"> </span><span class="hl-12">lang</span><span class="hl-0">=</span><span class="hl-13">&quot;zh-cn&quot;</span><span class="hl-10">&gt;</span><br/><span class="hl-0">    </span><span class="hl-10">&lt;</span><span class="hl-11">head</span><span class="hl-10">&gt;</span><br/><span class="hl-0">        </span><span class="hl-10">&lt;</span><span class="hl-11">meta</span><span class="hl-0"> </span><span class="hl-12">charset</span><span class="hl-0">=</span><span class="hl-13">&quot;utf-8&quot;</span><span class="hl-0"> </span><span class="hl-10">/&gt;</span><br/><span class="hl-0">        </span><span class="hl-10">&lt;</span><span class="hl-11">meta</span><br/><span class="hl-0">            </span><span class="hl-12">name</span><span class="hl-0">=</span><span class="hl-13">&quot;viewport&quot;</span><br/><span class="hl-0">            </span><span class="hl-12">content</span><span class="hl-0">=</span><span class="hl-13">&quot;width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0&quot;</span><br/><span class="hl-0">        </span><span class="hl-10">/&gt;</span><br/><span class="hl-0">        </span><span class="hl-10">&lt;</span><span class="hl-11">title</span><span class="hl-10">&gt;</span><span class="hl-0">three-tile最小化应用</span><span class="hl-10">&lt;/</span><span class="hl-11">title</span><span class="hl-10">&gt;</span><br/><span class="hl-0">    </span><span class="hl-10">&lt;/</span><span class="hl-11">head</span><span class="hl-10">&gt;</span><br/><span class="hl-0">    </span><span class="hl-10">&lt;</span><span class="hl-11">style</span><span class="hl-10">&gt;</span><br/><span class="hl-14">        </span><span class="hl-15">html</span><span class="hl-14">,</span><br/><span class="hl-14">        </span><span class="hl-15">body</span><span class="hl-14"> {</span><br/><span class="hl-14">            </span><span class="hl-12">background-color</span><span class="hl-14">: </span><span class="hl-16">#333</span><span class="hl-14">;</span><br/><span class="hl-14">            </span><span class="hl-12">height</span><span class="hl-14">: </span><span class="hl-9">100%</span><span class="hl-14">;</span><br/><span class="hl-14">            </span><span class="hl-12">width</span><span class="hl-14">: </span><span class="hl-9">100%</span><span class="hl-14">;</span><br/><span class="hl-14">            </span><span class="hl-12">padding</span><span class="hl-14">: </span><span class="hl-9">0</span><span class="hl-14">;</span><br/><span class="hl-14">            </span><span class="hl-12">margin</span><span class="hl-14">: </span><span class="hl-9">0</span><span class="hl-14">;</span><br/><span class="hl-14">            </span><span class="hl-12">display</span><span class="hl-14">: </span><span class="hl-16">flex</span><span class="hl-14">;</span><br/><span class="hl-14">        }</span><br/><span class="hl-14">        </span><span class="hl-15">#map</span><span class="hl-14"> {</span><br/><span class="hl-14">            </span><span class="hl-12">flex</span><span class="hl-14">: </span><span class="hl-9">1</span><span class="hl-14">;</span><br/><span class="hl-14">        }</span><br/><span class="hl-14">    </span><span class="hl-10">&lt;/</span><span class="hl-11">style</span><span class="hl-10">&gt;</span><br/><br/><span class="hl-0">    </span><span class="hl-7">&lt;!-- 因three@v0.150+废弃了普通导入方式，需要改为使用importmap导入 --&gt;</span><br/><span class="hl-0">    </span><span class="hl-10">&lt;</span><span class="hl-11">script</span><span class="hl-14"> </span><span class="hl-12">type</span><span class="hl-14">=</span><span class="hl-13">&quot;importmap&quot;</span><span class="hl-10">&gt;</span><br/><span class="hl-14">        {</span><br/><span class="hl-14">            &quot;imports&quot;: {</span><br/><span class="hl-14">                &quot;three&quot;: &quot;https://unpkg.com/three@0.165.0/build/three.module.js&quot;,</span><br/><span class="hl-14">                &quot;three-tile&quot;: &quot;https://unpkg.com/three-tile@0.6.2/dist/three-tile.js&quot;</span><br/><span class="hl-14">            }</span><br/><span class="hl-14">        }</span><br/><span class="hl-14">    </span><span class="hl-10">&lt;/</span><span class="hl-11">script</span><span class="hl-10">&gt;</span><br/><br/><span class="hl-0">    </span><span class="hl-10">&lt;</span><span class="hl-11">body</span><span class="hl-10">&gt;</span><br/><span class="hl-0">        </span><span class="hl-10">&lt;</span><span class="hl-11">div</span><span class="hl-0"> </span><span class="hl-12">id</span><span class="hl-0">=</span><span class="hl-13">&quot;map&quot;</span><span class="hl-10">&gt;&lt;/</span><span class="hl-11">div</span><span class="hl-10">&gt;</span><br/><span class="hl-0">        </span><span class="hl-10">&lt;</span><span class="hl-11">script</span><span class="hl-14"> </span><span class="hl-12">type</span><span class="hl-14">=</span><span class="hl-13">&quot;module&quot;</span><span class="hl-10">&gt;</span><br/><span class="hl-14">            </span><span class="hl-6">import</span><span class="hl-14"> </span><span class="hl-5">*</span><span class="hl-14"> </span><span class="hl-6">as</span><span class="hl-14"> </span><span class="hl-1">THREE</span><span class="hl-14"> </span><span class="hl-6">from</span><span class="hl-14"> </span><span class="hl-2">&quot;three&quot;</span><span class="hl-14">;</span><br/><span class="hl-14">            </span><span class="hl-6">import</span><span class="hl-14"> </span><span class="hl-5">*</span><span class="hl-14"> </span><span class="hl-6">as</span><span class="hl-14"> </span><span class="hl-1">tt</span><span class="hl-14"> </span><span class="hl-6">from</span><span class="hl-14"> </span><span class="hl-2">&quot;three-tile&quot;</span><span class="hl-14">;</span><br/><br/><span class="hl-14">            </span><span class="hl-1">console</span><span class="hl-14">.</span><span class="hl-4">log</span><span class="hl-14">(</span><span class="hl-2">&quot;three-tile start!&quot;</span><span class="hl-14">);</span><br/><br/><span class="hl-14">            </span><span class="hl-7">// MapBoxToken 请更换为你自己申请的key</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">MAPBOXKEY</span><span class="hl-14"> </span><span class="hl-0">=</span><br/><span class="hl-14">                </span><span class="hl-2">&quot;pk.eyJ1Ijoic2hhbmUwMjIwNzIiLCJhIjoiY2p5amF6YnFiMDB0YjNkcGU1ZWxoMWl0NiJ9.TsmgK5-HJKWOE-DscbNbTA&quot;</span><span class="hl-14">;</span><br/><br/><span class="hl-14">            </span><span class="hl-7">// mapbox影像数据源</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">mapBoxImgSource</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-5">new</span><span class="hl-14"> </span><span class="hl-1">tt</span><span class="hl-14">.</span><span class="hl-1">plugin</span><span class="hl-14">.</span><span class="hl-4">MapBoxSource</span><span class="hl-14">({</span><br/><span class="hl-14">                </span><span class="hl-1">token:</span><span class="hl-14"> </span><span class="hl-8">MAPBOXKEY</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-1">dataType:</span><span class="hl-14"> </span><span class="hl-2">&quot;image&quot;</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-1">style:</span><span class="hl-14"> </span><span class="hl-2">&quot;mapbox.satellite&quot;</span><span class="hl-14">,</span><br/><span class="hl-14">            });</span><br/><span class="hl-14">            </span><span class="hl-7">// mapbox地形数据源</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">mapBoxDemSource</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-5">new</span><span class="hl-14"> </span><span class="hl-1">tt</span><span class="hl-14">.</span><span class="hl-1">plugin</span><span class="hl-14">.</span><span class="hl-4">MapBoxSource</span><span class="hl-14">({</span><br/><span class="hl-14">                </span><span class="hl-1">token:</span><span class="hl-14"> </span><span class="hl-8">MAPBOXKEY</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-1">dataType:</span><span class="hl-14"> </span><span class="hl-2">&quot;terrain-rgb&quot;</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-1">style:</span><span class="hl-14"> </span><span class="hl-2">&quot;mapbox.terrain-rgb&quot;</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-1">maxLevel:</span><span class="hl-14"> </span><span class="hl-9">15</span><span class="hl-14">,</span><br/><span class="hl-14">            });</span><br/><br/><span class="hl-14">            </span><span class="hl-7">// 创建地图</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">map</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-1">tt</span><span class="hl-14">.</span><span class="hl-1">TileMap</span><span class="hl-14">.</span><span class="hl-4">create</span><span class="hl-14">({</span><br/><span class="hl-14">                </span><span class="hl-7">// 影像数据源</span><br/><span class="hl-14">                </span><span class="hl-1">imgSource:</span><span class="hl-14"> </span><span class="hl-1">mapBoxImgSource</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-7">// 地形数据源</span><br/><span class="hl-14">                </span><span class="hl-1">demSource:</span><span class="hl-14"> </span><span class="hl-1">mapBoxDemSource</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-7">// 地图投影中心经度</span><br/><span class="hl-14">                </span><span class="hl-1">lon0:</span><span class="hl-14"> </span><span class="hl-9">90</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-7">// 最小缩放级别</span><br/><span class="hl-14">                </span><span class="hl-1">minLevel:</span><span class="hl-14"> </span><span class="hl-9">2</span><span class="hl-14">,</span><br/><span class="hl-14">                </span><span class="hl-7">// 最大缩放级别</span><br/><span class="hl-14">                </span><span class="hl-1">maxLevel:</span><span class="hl-14"> </span><span class="hl-9">18</span><span class="hl-14">,</span><br/><span class="hl-14">            });</span><br/><span class="hl-14">            </span><span class="hl-7">// 地图旋转到xz平面</span><br/><span class="hl-14">            </span><span class="hl-1">map</span><span class="hl-14">.</span><span class="hl-4">rotateX</span><span class="hl-14">(</span><span class="hl-0">-</span><span class="hl-1">Math</span><span class="hl-14">.</span><span class="hl-8">PI</span><span class="hl-14"> </span><span class="hl-0">/</span><span class="hl-14"> </span><span class="hl-9">2</span><span class="hl-14">);</span><br/><br/><span class="hl-14">            </span><span class="hl-7">// 地图中心坐标(经度，纬度，高度)</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">centerGeo</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-5">new</span><span class="hl-14"> </span><span class="hl-8">THREE</span><span class="hl-14">.</span><span class="hl-4">Vector3</span><span class="hl-14">(</span><span class="hl-9">105</span><span class="hl-14">, </span><span class="hl-9">30</span><span class="hl-14">, </span><span class="hl-9">0</span><span class="hl-14">);</span><br/><span class="hl-14">            </span><span class="hl-7">// 摄像坐标(经度，纬度，高度)</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">camersGeo</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-5">new</span><span class="hl-14"> </span><span class="hl-8">THREE</span><span class="hl-14">.</span><span class="hl-4">Vector3</span><span class="hl-14">(</span><span class="hl-9">105</span><span class="hl-14">, </span><span class="hl-9">0</span><span class="hl-14">, </span><span class="hl-9">5000</span><span class="hl-14">);</span><br/><span class="hl-14">            </span><span class="hl-7">// 地图中心转为世界坐标</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">centerPostion</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-1">map</span><span class="hl-14">.</span><span class="hl-4">localToWorld</span><span class="hl-14">(</span><span class="hl-1">map</span><span class="hl-14">.</span><span class="hl-4">geo2pos</span><span class="hl-14">(</span><span class="hl-1">centerGeo</span><span class="hl-14">));</span><br/><span class="hl-14">            </span><span class="hl-7">// 摄像机转为世界坐标</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">cameraPosition</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-1">map</span><span class="hl-14">.</span><span class="hl-4">localToWorld</span><span class="hl-14">(</span><span class="hl-1">map</span><span class="hl-14">.</span><span class="hl-4">geo2pos</span><span class="hl-14">(</span><span class="hl-1">camersGeo</span><span class="hl-14">));</span><br/><span class="hl-14">            </span><span class="hl-7">// 初始化场景</span><br/><span class="hl-14">            </span><span class="hl-5">const</span><span class="hl-14"> </span><span class="hl-8">viewer</span><span class="hl-14"> </span><span class="hl-0">=</span><span class="hl-14"> </span><span class="hl-5">new</span><span class="hl-14"> </span><span class="hl-1">tt</span><span class="hl-14">.</span><span class="hl-1">plugin</span><span class="hl-14">.</span><span class="hl-4">GLViewer</span><span class="hl-14">(</span><span class="hl-2">&quot;#map&quot;</span><span class="hl-14">, { </span><span class="hl-1">centerPostion</span><span class="hl-14">, </span><span class="hl-1">cameraPosition</span><span class="hl-14"> });</span><br/><br/><span class="hl-14">            </span><span class="hl-7">// 地图添加到场景</span><br/><span class="hl-14">            </span><span class="hl-1">viewer</span><span class="hl-14">.</span><span class="hl-1">scene</span><span class="hl-14">.</span><span class="hl-4">add</span><span class="hl-14">(</span><span class="hl-1">map</span><span class="hl-14">);</span><br/><span class="hl-14">        </span><span class="hl-10">&lt;/</span><span class="hl-11">script</span><span class="hl-10">&gt;</span><br/><span class="hl-0">    </span><span class="hl-10">&lt;/</span><span class="hl-11">body</span><span class="hl-10">&gt;</span><br/><span class="hl-10">&lt;/</span><span class="hl-11">html</span><span class="hl-10">&gt;</span>
</code><button>Copy</button></pre>
<p>更多使用方法见 example <a href="https://sxguojf.github.io/three-tile-example">https://sxguojf.github.io/three-tile-example</a></p>
<a id="md:8-参考" class="tsd-anchor"></a><h2><a href="#md:8-参考">8. 参考</a></h2><ul>
<li><a href="https://github.com/CesiumGS/cesium">https://github.com/CesiumGS/cesium</a></li>
<li><a href="https://github.com/mapbox/mapbox-gl-js">https://github.com/mapbox/mapbox-gl-js</a></li>
<li><a href="https://leafletjs.com">https://leafletjs.com</a></li>
<li><a href="https://github.com/tentone/geo-three">https://github.com/tentone/geo-three</a></li>
<li><a href="https://github.com/ebeaufay/threedtiles">https://github.com/ebeaufay/threedtiles</a></li>
<li><a href="https://github.com/NASA-AMMOS/3DTilesRendererJS">https://github.com/NASA-AMMOS/3DTilesRendererJS</a></li>
<li><a href="https://github.com/wlgys8/GPUDrivenTerrainLearn">https://github.com/wlgys8/GPUDrivenTerrainLearn</a></li>
<li><a href="https://github.com/lijundacom/LeoGPUDriven">https://github.com/lijundacom/LeoGPUDriven</a></li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:three-tile-v063"><span>three-<wbr/>tile <wbr/>V0.6.3</span></a><ul><li><a href="#md:1-简介"><span>1 简介</span></a></li><li><ul><li><a href="#md:11-特点"><span>1.1 特点</span></a></li><li><a href="#md:12-开发环境"><span>1.2 开发环境</span></a></li></ul></li><li><a href="#md:2-安装"><span>2 安装</span></a></li><li><ul><li><a href="#md:21-直接引用"><span>2.1 直接引用</span></a></li><li><a href="#md:22-npm"><span>2.2 npm</span></a></li></ul></li><li><a href="#md:3-使用"><span>3 使用</span></a></li><li><ul><li><a href="#md:31-定义地图数据源"><span>3.1 定义地图数据源</span></a></li><li><a href="#md:32-地图创建"><span>3.2 地图创建</span></a></li><li><a href="#md:33-初始化三维场景"><span>3.3 初始化三维场景</span></a></li></ul></li><li><a href="#md:4-主要类说明"><span>4. 主要类说明</span></a></li><li><ul><li><a href="#md:41-tilemap-构造函数"><span>4.1 <wbr/>Tile<wbr/>Map 构造函数</span></a></li><li><a href="#md:42-tilemap-主要属性"><span>4.2 <wbr/>Tile<wbr/>Map 主要属性</span></a></li><li><a href="#md:43-tilemap-主要方法"><span>4.3 <wbr/>Tile<wbr/>Map 主要方法</span></a></li><li><a href="#md:44-tilemap-事件"><span>4.4 <wbr/>Tile<wbr/>Map 事件</span></a></li></ul></li><li><a href="#md:5-约定和限制"><span>5. 约定和限制</span></a></li><li><a href="#md:6-运行调试程序"><span>6. 运行调试程序</span></a></li><li><a href="#md:7-示例"><span>7. 示例</span></a></li><li><a href="#md:8-参考"><span>8. 参考</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>three-tile</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>